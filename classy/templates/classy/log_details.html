{% load static %}
{% include 'classy/head.html' %}
<title>History - Classy</title>
{% load classy_extras %}
</head>
<body id="bootstrapoverride">

{% include 'classy/navbar.html' %}

    <div id="topicTemplate" class="template container-fluid gov-container">
    <div class="row">
        <div class="col-lg-12">
        <h3 class=""><strong>Detailed view</strong></h3>
        </div>
    </div>
{% if obj %}
<div class="row">


<div class="col-sm-3">
<table class="table">
<thead>
	<tr>
		<th>Category</th>
		<th>Value</th>
	</tr>
</thead>
<tbody>
	<tr>
		<td><strong>ID</strong></td>
		<td>{{obj.id}}</td>
	</tr>
        <tr>
                <td><strong>State</strong></td>
                <td>{{state_translate|get_item:obj.state}}</td>
                <!--<td>{{obj.state}}</td>-->
        </tr>
	<tr>
		<td><strong>Datasource</strong></td>
		<td>{{obj.datasource}}</td>
	</tr>
        <tr>
                <td><strong>Schema</strong></td>
                <td>{{obj.schema}}</td>
        </tr>
        <tr>
                <td><strong>Table</strong></td>
                <td>{{obj.table}}</td>
        </tr>
        <tr>
                <td><strong>Column</strong></td>
                <td>{{obj.column}}</td>
        </tr>
        <tr>
                <td><strong>Created</strong></td>
                <td>{{obj.created}}</td>
        </tr>
        <tr>
                <td><strong>Creator</strong></td>
                <td>{{obj.creator.first_name}}</td>
        </tr>
</tbody>
</table>
</div>
<div class="col-sm-1"></div>
<div class="col-sm-8">
<table class="table">
<thead>
	<tr>
		<th>Date</th>
		<th>Action</th>
		<th>User</th>
		<th>Approver</th>
		<th>Old Classification</th>
		<th>New Classification</th>
		<th>Status</th>
	</tr>
</thead>
<tbody>
	{% for item in result %}
		<tr>
			<td>{{item.time}}</td>
			{% if item.flag == 1 %}
				<td>MODIFY</td>
			{% elif item.flag == 0 %}
				<td>DELETE</td>
			{% elif item.flag == 2 %}
				<td>CREATE</td>
			{% endif %}
			<td>{{item.user.first_name}}</td>
			<td>{{item.approver.first_name}}</td>
			<td>{{translate|get_item:item.old_classification}}</td>
			<td>{{translate|get_item:item.new_classification}}</td>
			<td>{{state_translate|get_item:item.state}}</td>
		</tr>
	{% endfor %}
</tbody>
</table>
</div>
{% else %}
	<div class="col">
	<p class="text-center"><strong>Invalid ID</strong></p>
	</div>
{% endif %}
</div>
</div>
</div>
{% include 'classy/tail.html' %}
</body>
</html>
